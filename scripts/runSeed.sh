#!/bin/bash

echo "========================================"
echo "       ููุก ูุงุนุฏุฉ ุงูุจูุงูุงุช - ููุทุฉ AI"
echo "========================================"
echo

echo "๐ ุจุฏุก ุชุดุบูู ุณูุฑูุจุช ููุก ูุงุนุฏุฉ ุงูุจูุงูุงุช..."
echo

# ุงูุชุญูู ูู ูุฌูุฏ Node.js
if ! command -v node &> /dev/null; then
    echo "โ ุฎุทุฃ: Node.js ุบูุฑ ูุซุจุช ุนูู ุงููุธุงู"
    echo "ูุฑุฌู ุชุซุจูุช Node.js ูู: https://nodejs.org"
    exit 1
fi

# ุงูุชุญูู ูู ูุฌูุฏ ููู .env
if [ ! -f ".env" ]; then
    echo "โ๏ธ  ุชุญุฐูุฑ: ููู .env ุบูุฑ ููุฌูุฏ"
    echo "ูุฑุฌู ุฅูุดุงุก ููู .env ูุน MONGODB_URI"
    read -p "ุงุถุบุท Enter ูููุชุงุจุนุฉ..."
fi

echo "๐ฆ ุชุซุจูุช ุงูุชุจุนูุงุช..."
npm install

echo
echo "๐๏ธ  ุชุดุบูู ุณูุฑูุจุช ููุก ูุงุนุฏุฉ ุงูุจูุงูุงุช..."
npm run seed

if [ $? -eq 0 ]; then
    echo
    echo "โ ุชู ููุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ!"
    echo
    echo "๐ ุจูุงูุงุช ุชุณุฌูู ุงูุฏุฎูู:"
    echo "ุงููุดุชุฑููู: subscriber1@example.com ุฅูู subscriber5@example.com"
    echo "ุงููุงูููู: owner1@example.com ุฅูู owner5@example.com"
    echo "ูููุฉ ุงููุฑูุฑ: Password123!"
else
    echo
    echo "โ ูุดู ูู ููุก ูุงุนุฏุฉ ุงูุจูุงูุงุช"
    echo "ูุฑุฌู ูุฑุงุฌุนุฉ ุฑุณุงุฆู ุงูุฎุทุฃ ุฃุนูุงู"
fi

echo
read -p "ุงุถุบุท Enter ููุฎุฑูุฌ..."